

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/assets/avatar.jpg">
  <link rel="icon" href="/assets/avatar.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="YangTY">
  <meta name="keywords" content="">
  
    <meta name="description" content="æ˜¯å†™ç»™è‡ªå·±çœ‹çš„å¤‡å¿˜å½•ï¼Œå¦‚æœæœ‰å†™çš„ä¸æ¸…æ¥šçš„ä¸œè¥¿è§è°…ï¼ˆ çœŸçš„å¾ˆæ„Ÿè°¢åŠ©æ•™å¤§äººï¼Œä»–ä»¬å¸®åˆ°äº†æˆ‘å¾ˆå¤šã€‚  Intro to Calculational Programming   Specification å¯ä»¥ç†è§£ä¸ºâ€œç›®çš„â€ä¸€ç±»çš„ä¸œè¥¿ã€‚  describes what task an algorithm is to perform, expresses the programmersâ€™ intent, sh">
<meta property="og:type" content="article">
<meta property="og:title" content="è®¡ç®—æ¦‚è®º A è¯¾ç¨‹ç¬”è®°ï¼šAgda">
<meta property="og:url" content="https://blog.imyangty.com/note-intro2computing/agda/index.html">
<meta property="og:site_name" content="YangTY&#39;s Blog">
<meta property="og:description" content="æ˜¯å†™ç»™è‡ªå·±çœ‹çš„å¤‡å¿˜å½•ï¼Œå¦‚æœæœ‰å†™çš„ä¸æ¸…æ¥šçš„ä¸œè¥¿è§è°…ï¼ˆ çœŸçš„å¾ˆæ„Ÿè°¢åŠ©æ•™å¤§äººï¼Œä»–ä»¬å¸®åˆ°äº†æˆ‘å¾ˆå¤šã€‚  Intro to Calculational Programming   Specification å¯ä»¥ç†è§£ä¸ºâ€œç›®çš„â€ä¸€ç±»çš„ä¸œè¥¿ã€‚  describes what task an algorithm is to perform, expresses the programmersâ€™ intent, sh">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-11-15T09:00:01.000Z">
<meta property="article:modified_time" content="2025-12-20T13:30:10.209Z">
<meta property="article:author" content="YangTY">
<meta property="article:tag" content="ç¬”è®°">
<meta property="article:tag" content="Agda">
<meta property="article:tag" content="å‡½æ•°å¼ç¼–ç¨‹">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
    <!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-8ZS41KYKYZ"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag("js", new Date());  gtag("config", "G-8ZS41KYKYZ:");</script>
  
  <title>è®¡ç®—æ¦‚è®º A è¯¾ç¨‹ç¬”è®°ï¼šAgda - YangTY&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"blog.imyangty.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null},"woyaola":null,"cnzz":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  



  
<!-- hexo injector head_end start --><style id="banner-theme-css">
#banner {
  background-image: url("/assets/banner-light.jpg") !important;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
}
#banner::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("/assets/banner-dark.jpg");
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  opacity: 0;
  transition: opacity 0.6s ease;
  z-index: 0;
  pointer-events: none;
}
#banner .mask {
  z-index: 1;
}
html[data-user-color-scheme="dark"] #banner::after {
  opacity: 1;
}
@media (prefers-color-scheme: dark) {
  html:not([data-user-color-scheme]) #banner::after {
    opacity: 1;
  }
}
@media (prefers-color-scheme: light) {
  html:not([data-user-color-scheme]) #banner::after {
    opacity: 0;
  }
}
</style><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>YangTY&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>Links</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://yangty-pic.oss-cn-beijing.aliyuncs.com/blog_banner.JPG') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="è®¡ç®—æ¦‚è®º A è¯¾ç¨‹ç¬”è®°ï¼šAgda"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        YangTY
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-15 17:00" pubdate>
          November 15, 2023 5:00 PM
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.3k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          36 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">è®¡ç®—æ¦‚è®º A è¯¾ç¨‹ç¬”è®°ï¼šAgda</h1>
            
              <p id="updated-time" class="note note-info" style="">
                
                  
                    Last updated on December 20, 2025 9:30 PM
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <p>æ˜¯å†™ç»™è‡ªå·±çœ‹çš„å¤‡å¿˜å½•ï¼Œå¦‚æœæœ‰å†™çš„ä¸æ¸…æ¥šçš„ä¸œè¥¿è§è°…ï¼ˆ</p>
<p>çœŸçš„å¾ˆæ„Ÿè°¢åŠ©æ•™å¤§äººï¼Œä»–ä»¬å¸®åˆ°äº†æˆ‘å¾ˆå¤šã€‚</p>
<h2 id="intro-to-calculational-programming"><a class="markdownIt-Anchor" href="#intro-to-calculational-programming"></a> Intro to Calculational Programming</h2>
<ul>
<li>
<p>Specification</p>
<p>å¯ä»¥ç†è§£ä¸ºâ€œç›®çš„â€ä¸€ç±»çš„ä¸œè¥¿ã€‚</p>
<ul>
<li>describes <strong>what</strong> task an algorithm is to perform,</li>
<li>expresses the programmersâ€™ intent,</li>
<li>should be as clear as possible.</li>
</ul>
</li>
<li>
<p>Implementation</p>
<p>å­—é¢æ„æ€ï¼Œå®ç°ã€‚</p>
<ul>
<li>describes <strong>how</strong> task is to perform,</li>
<li>expresses an algorithm (an execution),</li>
<li>should be effciently done within the time and space available.</li>
</ul>
</li>
</ul>
<p>The link is that the implementation should be <strong>proved</strong> to satisfy the specification.</p>
<p>Specification å¯ä»¥ç”¨ predicatesï¼ˆè°“è¯ï¼‰è¡¨è¾¾ï¼Œäº¦å¯ä»¥ç”¨ functions è¡¨è¾¾ã€‚</p>
<p>ä¸»è¦å°†ç›®å…‰èšç„¦äº functional specification, since</p>
<ul>
<li>Itâ€™s <strong>executable</strong></li>
<li>Itâ€™s powerful to express intended mappings directly by functions or through their <em>composition</em></li>
<li>Itâ€™s suitable for <strong>reasoning</strong>ï¼ˆæ¨ç†ï¼‰, when functions used are <em>well-structured</em> with good algebraic propertiesï¼ˆæ€§è´¨ï¼‰</li>
</ul>
<hr />
<p>æ³¨æ„åˆ°ï¼Œå¯¹äºæœ€å¤§å­æ®µå’Œé—®é¢˜ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> çš„è´ªå¿ƒåšæ³•å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> çš„æœ´ç´ åšæ³•æ˜¯æœ‰å¾ˆå¤§çš„åŒºåˆ«çš„ã€‚</p>
<p>å¦‚æœå¯¹äº more general case æˆ‘ä»¬èƒ½å¤Ÿæœ‰é€šç”¨çš„ calculation ä»æœ´ç´ åšæ³•å¾—åˆ°ä¸€ä¸ªé«˜æ•ˆç‡åšæ³•ï¼Œè¿™å°±æ˜¯ program calculation åšçš„äº‹æƒ…ã€‚ä¸è¿‡å¥½åƒ Itâ€™s still under research. Whatever.</p>
<p>ä¸æ˜¯å¾ˆé‡è¦ï¼Œé‡è¦çš„æ˜¯ Agda å¥½ä»–å¦ˆéš¾å•Šã€‚</p>
<blockquote>
<p>Program testing can be used to show the presence of bugs, but never to show their absence!</p>
<p>Edsger Dijkstra</p>
</blockquote>
<p>ç°åœ¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œwe can verify software correctness by writing mathematical proofs about it.</p>
<p>Agda æ˜¯ä¸€ç§å‡½æ•°å¼è¯­è¨€ which is implemented in Haskellã€‚ä»–é™¤äº†è¦æ±‚ pure functional å¤–è¿˜è¦æ±‚ always terminate.</p>
<ul>
<li><strong>Types: Propositions</strong>ï¼šå‘½é¢˜æ˜¯é€šè¿‡ç±»å‹çš„æ–¹å¼ä¹¦å†™çš„ã€‚</li>
<li><strong>Terms (functional programs): Proofs</strong>ï¼šå†™å‡ºæ¥çš„è¿™æ®µç¨‹åºå°±æ˜¯è¯æ˜ã€‚</li>
</ul>
<h2 id="agda-and-booleans"><a class="markdownIt-Anchor" href="#agda-and-booleans"></a> Agda and Booleans</h2>
<p>åŸºæœ¬æ“ä½œï¼š</p>
<ul>
<li>Load/åŠ è½½æ–‡ä»¶ï¼š<code>C-c C-l</code>ï¼Œå…¶ä¸­ <code>C-a</code> è¡¨ç¤º <code>Ctrl+A</code>ï¼›</li>
<li>Compile/ç¼–è¯‘ï¼š<code>C-x C-c</code>ï¼›</li>
<li>Compute/Normalize/è®¡ç®—ï¼š<code>C-c C-n</code>ã€‚</li>
<li>Type inference/ç±»å‹æ¨æ–­ï¼š<code>C-c C-d</code></li>
</ul>
<p>ä¸‹é¢æ¥çœ‹ <code>bool</code> æ ‡å‡†åº“ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs agda">module bool where<br><br>open import level<br><br>--------------------------------------------------------<br>-- datatypes<br>--------------------------------------------------------<br><br>data ğ”¹ : Set where<br>  tt : ğ”¹<br>  ff : ğ”¹<br></code></pre></td></tr></table></figure>
<p><code>module</code>ï¼šæ¯ä¸ª Agda æ–‡ä»¶éƒ½è¦åŒ…å«ä¸€ä¸ªæ¨¡å—å£°æ˜ï¼Œè€Œä¸”å’Œæ–‡ä»¶åå¿…é¡»ä¸€æ ·ã€‚</p>
<p>æ³¨é‡Šçš„è§„åˆ™ä¸ Haskell å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚</p>
<p><code>ğ”¹</code> æ˜¯ä¸€ä¸ª type constructorï¼Œé‡Œé¢åŒ…å«äº†ä¸¤ä¸ª data constructorï¼šä¸€ä¸ª <code>tt</code> ä¸€ä¸ª <code>ff</code>ã€‚</p>
<p>åŒæ—¶ï¼Œ<code>ğ”¹</code> çš„ç±»å‹æ˜¯ <code>Set</code>ã€‚Agda ç”¨äº†ä¸€ä¸ªå¾ˆå·§å¦™çš„æ–¹æ³•æ¥é¿å…ç½—ç´ æ‚–è®ºï¼šç»™ <code>Set</code> èµ‹äºˆå±‚çº§ï¼Œå…¶ä¸­ <code>Set</code> å°±æ˜¯ <code>Set 0</code> çš„ç®€å†™ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs agda">~_ : ğ”¹ â†’ ğ”¹<br>~ tt = ff <br>~ ff = tt<br><br>_&amp;&amp;_ : ğ”¹ â†’ ğ”¹ â†’ ğ”¹<br>tt &amp;&amp; b = b<br>ff &amp;&amp; b = ff<br><br>_||_ : ğ”¹ â†’ ğ”¹ â†’ ğ”¹<br>tt || b = tt<br>ff || b = b<br></code></pre></td></tr></table></figure>
<p>å‡½æ•°çš„å£°æ˜å’Œ Haskell çš„æ„Ÿè§‰å¾ˆåƒï¼Œ<code>~</code> åé¢åŠ ä¸‹åˆ’çº¿è¡¨ç¤ºæ¥æ”¶å‚æ•°ã€‚Pattern matching çš„æ€è·¯å’Œ Haskell çš„ä¹Ÿæ˜¯å‡ ä¹ä¸€æ¨¡ä¸€æ ·çš„ã€‚ä½†æ˜¯<strong>æ³¨æ„ä¸€å®šè¦åŠ ç©ºæ ¼</strong>ï¼Œå†™æˆ <code>~tt</code> æ˜¯ä¼š parse error çš„ï¼ŒAgda ä¼šæŠŠ <code>~tt</code> æ•´ä½“å½“æˆä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚</p>
<p>äºŒå…ƒè¿ç®—ç¬¦è¢«å®šä¹‰ä¸º curried function ä¹Ÿæ˜¯å’Œ Haskell ç±»ä¼¼ï¼Œæ­¤å¤„ç•¥è¿‡ã€‚</p>
<p>æ³¨æ„ Agda å¯¹ç¼©è¿›åŒæ ·æ•æ„Ÿã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs agda">if_then_else_ : âˆ€ &#123;â„“&#125; &#123;A : Set â„“&#125; <br>                  â†’ ğ”¹ â†’ A â†’ A â†’ A<br>if tt then y else z = y<br>if ff then y else z = z<br></code></pre></td></tr></table></figure>
<p>è°ƒç”¨çš„æ—¶å€™è¿˜å¯ä»¥å†™ <code>if_then_else_ x y z</code> çš„ã€‚æ­¤å¤„å¯ä»¥æŒ‰ä¸‹ <code>C-c C-n</code>ï¼Œç„¶åè¾“å…¥ <code>if tt then tt else ff</code>ï¼ŒAgda ä¼šç»™ä½ è¿”å› <code>tt</code>ã€‚<code>âˆ€</code> é€šè¿‡ <code>\all</code> è¾“å…¥ï¼Œ<code>â„“</code> é€šè¿‡ <code>\ell</code> è¾“å…¥ã€‚</p>
<h2 id="intro-to-constructive-proof"><a class="markdownIt-Anchor" href="#intro-to-constructive-proof"></a> Intro to Constructive Proof</h2>
<h3 id="åˆæ¢-equality-type-è¯æ˜"><a class="markdownIt-Anchor" href="#åˆæ¢-equality-type-è¯æ˜"></a> åˆæ¢ equality type è¯æ˜</h3>
<p>æ•™æä¸Šçš„ introductionï¼Œæˆ‘è§‰å¾—ç›¸å½“ä»¤äººè±ç„¶å¼€æœ—ã€‚</p>
<blockquote>
<p>Admittedly, weâ€™d have to be having a pretty bad coding day to define <code>~ ff</code> to be <code>ff</code>, but it could happen. And certainly if we were writing some more complicated code, we know very well that we could make mistakes and accidentally introduce bugs into the code without meaning to. If we wrote the previous definition, evaluating <code>~ ~ tt</code> would give us <code>ff</code>, instead of the expected <code>tt</code>. So it would be nice to record and check the fact that <code>~ ~ tt</code> is supposed to be <code>tt</code>. We could write some test code and remember to run it from time to time to check that we get the expected answer. But we can use this test case as a very rudimentary form of theorem, and use Agdaâ€™s theorem-proving capabilities to confirm that the theorem holds (i. e., the test succeeds).</p>
</blockquote>
<p>ä»¥æˆ‘ä»¬è¦è¯æ˜ <code>~ ~ tt</code> ä¸ <code>tt</code> ç›¸ç­‰ä¸ºä¾‹ï¼Œåœ¨ Agda ä¸­ï¼Œé€šè¿‡ <strong>equality type</strong> å®ç°ï¼š<code>~ ~ tt â‰¡ tt</code>ã€‚è¿™æ ·çš„â€œç­‰å¼â€è¢«ç§°ä½œ <strong>propositional equality</strong>ã€‚ï¼ˆ<code>â‰¡</code> é€šè¿‡ <code>\equiv</code> æˆ– <code>\==</code> æ‰“å‡ºæ¥ï¼‰Agda æ˜¯æŠŠå½¢å¦‚è¿™æ ·çš„ formula å½“ä½œç±»å‹æ¥åˆ¤æ–­çš„ã€‚é€»è¾‘å‘½é¢˜å¯ä»¥è¢«è§†ä½œç±»å‹æ˜¯ç±»å‹è®ºä¸­éå¸¸é‡è¦çš„æ€æƒ³ï¼Œå³ <strong>Curry-Howard isomorphism</strong>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs agda">~~tt : ~ ~ tt â‰¡ tt<br>~~tt = refl<br><br>~~ff : ~ ~ ff â‰¡ ff<br>~~ff = refl<br><br>~~-elim : âˆ€ (b : ğ”¹) â†’ ~ ~ b â‰¡ b<br>~~-elim tt = ~~tt<br>~~-elim ff = ~~ff<br></code></pre></td></tr></table></figure>
<p>Agda å¯ä»¥å°† <code>~ ~ tt</code> æŒ‰ç…§ <code>~_</code>  çš„å®šä¹‰å±•å¼€ï¼Œç„¶åæˆ‘ä»¬ç›¸å½“äºè¦è¯æ˜ <code>tt â‰¡ tt</code>ï¼Œè¿™å¯ä»¥é€šè¿‡ <strong>reflexivity</strong> å®ç°ã€‚å…¶ä¸­ equality çš„å®šä¹‰å¦‚ä¸‹ï¼š<code>_â‰¡_</code> æ˜¯ä¸€ä¸ª type constructor, which has only one data constructor: reflã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">data _â‰¡_ &#123;â„“&#125; &#123;A : Set â„“&#125; (x : A) : A â†’ Set â„“ where<br>  refl : x â‰¡ x<br></code></pre></td></tr></table></figure>
<p>å¯¹äº <code>~~-elim</code>ï¼Œå°±æ˜¯æ›´ä¸€èˆ¬åŒ–çš„æƒ…å½¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä½œæ¥æ”¶ä¸€ä¸ª <code>ğ”¹</code> ç±»å‹çš„å€¼å¹¶è¿”å›ä¸€ä¸ªè¯æ˜ã€‚å…¨ç§°é‡è¯å…¶å®æ²¡æœ‰ä»€ä¹ˆå±ç”¨ï¼Œå†™ç€å¥½çœ‹è€Œå·²ï¼Œå»æ‰ä¸ä¼šå½±å“ä»»ä½•äº‹æƒ…ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å†å»ç†è§£æ•´ä»¶äº‹æƒ…çš„è¯ï¼Œå¯¹äºä¸€ä¸ª typeï¼Œå…¶å¯ä»¥è¡¨ç¤ºä¸€ä¸ª propositionï¼Œå¦‚æœè¿™ä¸ª type æœ‰è‰¯å®šä¹‰çš„ value å­˜åœ¨ï¼Œè¯´æ˜æœ‰è¯æ˜ã€‚å°±æ¯”å¦‚è¯´ <code>~~tt</code>ï¼Œå®ƒçš„ type å°±æ˜¯ <code>~ ~ tt â‰¡ tt</code>ï¼Œè€Œæˆ‘ä»¬é€šè¿‡å®šä¹‰æŠŠ LHS å±•å¼€å˜æˆ <code>tt â‰¡ tt</code>ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥ç”¨ <code>refl</code> è¿™ä¸ª data constructor æ„é€ ä¸€ä¸ªè‰¯å®šä¹‰çš„ valueï¼Œå…¶å³å¾—åˆ°äº†è¯æ˜ã€‚åªè¦å…¶èƒ½é€šè¿‡ Agda çš„ç±»å‹æ£€æŸ¥ï¼Œåˆ™ä½ å†™çš„è¿™ä¸ªè¯æ˜å°±æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<p>Agda è¿˜è¦æ±‚ç¨‹åºä¸€å®šè¦èƒ½ terminateï¼Œè¿™æ˜¯é¿å…ç±»ä¼¼äºå¾ªç¯è®ºè¯çš„æƒ…å†µå‡ºç°ã€‚å¦‚æœå†™å‡º <code>a = a</code> è¿™æ ·çš„ä¸œè¥¿ï¼Œé‚£è‚¯å®šæ˜¯ä¸åˆé€»è¾‘çš„ã€‚</p>
<p>è€Œï¼Œå‘½é¢˜çš„åˆå–å¯ä»¥ç”¨ pair è¡¨ç¤ºï¼š<code>(p1, p2)</code> æ˜¯ä¸ª typeï¼Œå…¶æœ‰è‰¯å®šä¹‰çš„ value å­˜åœ¨å½“ä¸”ä»…å½“ <code>p1</code> å’Œ <code>p2</code> éƒ½ä¸ºçœŸã€‚</p>
<p>å‘½é¢˜çš„æå–é€šè¿‡ç±»ä¼¼ Haskell ä¸­ or çš„æ„Ÿè§‰å®ç°ï¼Œæ¯”å¦‚ <code>data Maybe a = Nothing | Just a</code> çš„æ„Ÿè§‰ï¼Œåªè¦ä¸€ä¸ªè‰¯å®šä¹‰ï¼Œæ•´ä¸ªå°±å¯ä»¥è‰¯å®šä¹‰ã€‚</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mn>1</mn></msub><mtext>â€…â€Š</mtext><mo>âŸ¹</mo><mtext>â€…â€Š</mtext><msub><mi>p</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">p_1\implies p_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7194400000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âŸ¹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å¯ä»¥é€šè¿‡â€œå‡½æ•°â€å®ç°ã€‚æ¯”å¦‚è¯´ <code>p1 -&gt; p2</code>ã€‚</p>
</blockquote>
<h3 id="implicit-argument-ä»¥åŠå«å‡è®¾çš„å®šç†è¯æ˜"><a class="markdownIt-Anchor" href="#implicit-argument-ä»¥åŠå«å‡è®¾çš„å®šç†è¯æ˜"></a> Implicit Argument ä»¥åŠå«å‡è®¾çš„å®šç†è¯æ˜</h3>
<p>ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥çš„å‚æ•°å«åš <strong>implicit argument</strong>ï¼Œæ¯”å¦‚è¯´ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">&amp;&amp;-idem : âˆ€ &#123;b&#125; â†’ b &amp;&amp; b â‰¡ b<br>&amp;&amp;-idem&#123;tt&#125; = refl<br>&amp;&amp;-idem&#123;ff&#125; = refl<br></code></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é‡‡ç”¨ pattern matching çš„æ–¹å¼å»å†™ã€‚ä½†æ˜¯ä¸ºä½•æˆ‘ä»¬ä¸èƒ½è¿™ä¹ˆå†™å‘¢ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">&amp;&amp;-idem : âˆ€ &#123;b&#125; â†’ b &amp;&amp; b â‰¡ b<br>&amp;&amp;-idem = refl<br></code></pre></td></tr></table></figure>
<p>å®é™…ä¸Šæ˜¯å› ä¸ºï¼Œå¯¹äºä¸€ä¸ªæŠ½è±¡çš„ <code>b</code>ï¼Œæˆ‘ä»¬æ²¡æ³•ç›´æ¥æŒ‰ç…§å®šä¹‰å»å±•å¼€ <code>b &amp;&amp; b</code>ã€‚</p>
<p>éšå¼å‚æ•°çš„å¥½å¤„åœ¨äºå¯ä»¥ä½¿ç¨‹åºæ›´ä¸ºç®€æ´ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">sb : tt &amp;&amp; tt â‰¡ tt<br>sb = &amp;&amp;-idem<br></code></pre></td></tr></table></figure>
<p>Agda ä¼šè‡ªåŠ¨æ¨æ–­ä¼ è¿› <code>&amp;&amp;-idem</code> çš„å‚æ•°ï¼Œè¿™ä½¿å¾—ä»£ç æ›´ä¸ºç®€æ´ã€‚</p>
<p>å†çœ‹ä¸‹ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">||â‰¡ffâ‚ : âˆ€ &#123;b1&#125;&#123;b2&#125; â†’ b1 || b2 â‰¡ ff â†’ b1 â‰¡ ff<br>||â‰¡ffâ‚ &#123;ff&#125; p = refl<br>||â‰¡ffâ‚ &#123;tt&#125; ()<br></code></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°æˆ‘ä»¬çš„éšå¼å‚æ•°æ˜¯ä¸¤ä¸ª <code>ğ”¹</code>ï¼Œç„¶åæ¥æ”¶ä¸€ä¸ªè¯æ˜ whose type is <code>b1 || b2 â‰¡ ff</code>ï¼Œè¿”å›ä¸€ä¸ªè¯æ˜ whose type is <code>b1 â‰¡ ff</code>ã€‚è¿™å…¶å®å°±æ˜¯æ‰€è°“çš„å¸¦æœ‰å‡è®¾çš„å®šç†è¯æ˜ã€‚è‡³äºæˆ‘ä»¬çš„åˆ†ç±»è®¨è®ºï¼Œå…¶å®ä¹Ÿå°±æ˜¯åœ¨åš pattern matchingã€‚æ³¨æ„ä¸€ä¸‹ç¬¬ä¸‰è¡Œçš„ <code>()</code> è®°å·ï¼š<code>absurd pattern</code>ï¼Œè¿™æ˜¯åœ¨è¯´æ˜è¿™ä¸ªå‡è®¾ä¸å¯èƒ½æˆç«‹ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">||â‰¡ffâ‚ : âˆ€ &#123;b1 b2&#125; â†’ b1 || b2 â‰¡ ff â†’ b1 â‰¡ ff<br>||â‰¡ffâ‚ &#123;ff&#125; p = refl<br>||â‰¡ffâ‚ &#123;tt&#125; p = p<br></code></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸º <code>tt || b2 â‰¡ ff</code> å¯ä»¥ç”¨ <code>_||_</code> çš„å®šä¹‰å±•å¼€æˆ <code>tt â‰¡ ff</code>ï¼Œå’Œæœ€åè¦è¯æ˜çš„ä¸œè¥¿çš„ type å¯¹åº”å¾—ä¸Šï¼ˆå³ <code>tt â‰¡ ff</code>ï¼‰ï¼Œä½†æ˜¯å¦‚æœæµ…æµ…ä¿®æ”¹ä¸€ä¸‹å°±ä¸å¯ä»¥äº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">||â‰¡ffâ‚‚ : âˆ€ &#123;b1 b2&#125; â†’ b1 || b2 â‰¡ ff â†’ ff â‰¡ b1<br>||â‰¡ffâ‚‚ &#123;ff&#125; p = refl<br>||â‰¡ffâ‚‚ &#123;tt&#125; p = p<br></code></pre></td></tr></table></figure>
<p>å¦‚æœè¿™ä¹ˆå†™çš„è¯ï¼ŒAgda ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Error:<br>tt != ff of <span class="hljs-built_in">type</span> ğ”¹<br>when checking that the expression p has <span class="hljs-built_in">type</span> ff â‰¡ tt<br></code></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º <code>p</code> çš„ type ç»è¿‡å±•å¼€åæ˜¯ <code>tt â‰¡ ff</code>ï¼Œå’Œæˆ‘ä»¬éœ€è¦çš„ <code>ff â‰¡ tt</code> æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™å°±å¾ˆé”™ã€‚æ‰€ä»¥è¯´<strong>ä¼¼ä¹ç”¨ absurd pattern ä¼šæ›´å¥½ä¸€äº›</strong>ã€‚</p>
<h3 id="matching-on-equality-proofs-ä»¥åŠ-rewrite"><a class="markdownIt-Anchor" href="#matching-on-equality-proofs-ä»¥åŠ-rewrite"></a> Matching on Equality Proofs ä»¥åŠ rewrite</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs agda">||-congâ‚ : âˆ€ &#123;b1 b1&#x27; b2&#125; â†’ b1 â‰¡ b1&#x27; â†’ b1 || b2 â‰¡ b1&#x27; || b2<br>||-congâ‚ refl = refl<br><br>||-congâ‚‚ : âˆ€ &#123;b1 b2 b2&#x27;&#125; â†’ b2 â‰¡ b2&#x27; â†’ b1 || b2 â‰¡ b1 || b2&#x27;<br>||-congâ‚‚ p rewrite p = refl<br></code></pre></td></tr></table></figure>
<p>çœ‹ç¬¬ä¸€ä¸ªï¼Œå…³é”®ç‚¹åœ¨äºç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>refl</code> çš„è¯ï¼Œé‚£ä¹ˆä¹‹å Agda å°±çŸ¥é“äº†å¯ä»¥åšåŒä¹‰æ›¿æ¢ï¼Œç›®æ ‡å˜æˆ <code>b1 || b2 â‰¡ b1 || b2</code>ï¼Œè‡ªç„¶å¯ä»¥ç”¨ <code>refl</code> è¯æ˜ã€‚</p>
<p>dot pattern ä»€ä¹ˆçš„å†…å®¹ç•¥è¿‡äº†ï¼ŒAgda 2.6 æ›´æ–°åæ— æ‰€è°“äº†å·²ç»ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼š<code>rewrite</code>ã€‚</p>
<p>çœ‹ç¬¬äºŒä¸ªå®šç†ï¼Œå¦‚æœæˆ‘ä»¬è¿™æ ·å†™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">||-congâ‚‚ : âˆ€ &#123;b1 b2 b2&#x27;&#125; â†’ b2 â‰¡ b2&#x27; â†’ b1 || b2 â‰¡ b1 || b2&#x27;<br>||-congâ‚‚ = ?<br></code></pre></td></tr></table></figure>
<p>å†æŒ‰ä¸‹ <code>C-c C-l</code>ï¼Œä»–ä¼šå¼•å…¥ä¸€ä¸ª holeï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">||-congâ‚‚ : âˆ€ &#123;b1 b2 b2&#x27;&#125; â†’ b2 â‰¡ b2&#x27; â†’ b1 || b2 â‰¡ b1 || b2&#x27;<br>||-congâ‚‚ p = &#123;!   0!&#125;<br></code></pre></td></tr></table></figure>
<p><em>æŠŠé¼ æ ‡å…‰æ ‡æ”¾åœ¨ goal å†…</em>ï¼ŒæŒ‰ä¸‹ <code>C-c C-,</code>ï¼Œä»–ä¼šæŠŠ context å’Œ goal åˆ—å‡ºæ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs agda">Goal and Context<br><br>(b3 || b4) â‰¡ (b3 || b2&#x27;)<br><br>p : b4 â‰¡ b2&#x27;<br>b2&#x27; : ğ”¹   (not in scope)<br>b4 : ğ”¹   (not in scope)<br>b3 : ğ”¹   (not in scope)<br></code></pre></td></tr></table></figure>
<p>ç°åœ¨ç›®æ ‡å˜æˆäº†è¯æ˜ <code>(b3 || b4) â‰¡ (b3 || b2')</code>ï¼ˆè¿™é‡Œå˜é‡æ¢äº†ä¸ªåå­—æ˜¯å› ä¸ºæ²¡æœ‰æŠŠ implicit argument å†™å‡ºæ¥æ‰€ä»¥ Agda éšä¾¿å–äº†ä¸€ä¸ªï¼‰ï¼Œå¦‚æœä½ å¼•å…¥ <code>rewrite p</code> è®°å·ï¼Œè¿™æ„å‘³ç€ä½ <strong>å¯ä»¥ç”¨ <code>p</code> çš„å†…å®¹å» rewrite goal ä¸­çš„å†…å®¹</strong>ï¼Œåœ¨è¿™é‡Œå°±æ˜¯æŠŠ <code>b2'</code> æ›¿æ¢æˆ <code>b4</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">||-congâ‚‚ : âˆ€ &#123;b1 b2 b2&#x27;&#125; â†’ b2 â‰¡ b2&#x27; â†’ b1 || b2 â‰¡ b1 || b2&#x27;<br>||-congâ‚‚ p rewrite p = &#123;!   0!&#125;<br></code></pre></td></tr></table></figure>
<p>åˆ—å‡º goalï¼Œå‘ç°å°±å˜æˆäº† <code>(b3 || lhs) â‰¡ (b3 || lhs)</code>ï¼Œè¿™å¯ä»¥ç”¨ refl è¯æ˜ï¼Œæ‰€ä»¥æœ€åçœ‹å‡ºæ¥å°±æ˜¯ä¸€å¼€å§‹çš„é‚£ä¸ªä¸œè¥¿ã€‚</p>
<p>rewrite è®°å·ç¡®å®ä¸å¤ªå¥½ç†è§£ã€‚ç­‰åˆ°çœ‹è‡ªç„¶æ•°ç›¸å…³è¯æ˜çš„æ—¶å€™ä¼šç†è§£çš„æ›´æ·±åˆ»äº›ï¼Œå¯ä»¥æ‹¿æ¥åšå½’çº³è¯æ˜ã€‚</p>
<h3 id="curry-howard-and-constructivity"><a class="markdownIt-Anchor" href="#curry-howard-and-constructivity"></a> Curry-Howard and Constructivity</h3>
<p>Curry-Howard Isomorphism å…¶å®æ˜¯å¯¹åº”çš„ <strong>constructive logic</strong>ï¼Œè€Œé classical logicã€‚</p>
<p>æ„é€ é€»è¾‘å¤§æ¦‚è¯´çš„å°±æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¯æ˜ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>âˆ¨</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A \lor B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ¨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> æ˜¯çœŸï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€å®šæ˜¯ç¡®åˆ‡åœ°çŸ¥é“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> å“ªä¸ªä¸ºçœŸã€‚å†æ¯”å¦‚è¯´å¦‚æœæˆ‘ä»¬è¦è¯æ˜å­˜åœ¨ä¸€ä¸ªæ»¡è¶³æŸç§æ€§è´¨çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>ï¼Œé‚£ä¹ˆä¸€å®šè¦è¯´æ˜ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> å…·ä½“æ˜¯è°ã€‚</p>
<p>è€Œ nonconstructive reasoning çš„åŸºæœ¬è¦ç´ æ˜¯<strong>æ’ä¸­å¾‹</strong>ï¼šå³å¯¹äºä»»æ„å‘½é¢˜ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>ï¼Œä¸€å®šæœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>âˆ¨</mo><mi mathvariant="normal">Â¬</mi><mi>P</mi></mrow><annotation encoding="application/x-tex">P\lor\neg P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ¨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Â¬</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> ä¸ºçœŸã€‚æ¯”å¦‚è¯´è¯æ˜å­˜åœ¨æ— ç†æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span></span></span></span> ä½¿å¾— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup></mrow><annotation encoding="application/x-tex">a^b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span></span></span> ä¸ºæœ‰ç†æ•°ï¼š</p>
<blockquote>
<p>nonconstructive proofï¼š</p>
<p>å‡è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><msqrt><mn>2</mn></msqrt><msqrt><mn>2</mn></msqrt></msup></mrow><annotation encoding="application/x-tex">\sqrt{2}^{\sqrt2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4318914999999999em;vertical-align:-0.13278em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.2991115em;"><span style="top:-3.3601199999999998em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.912845em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;">2</span></span><span style="top:-2.872845em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.12715500000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> ä¸ºæ— ç†æ•°ï¼Œåˆ™ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><msup><msqrt><mn>2</mn></msqrt><msqrt><mn>2</mn></msqrt></msup><mo separator="true">,</mo><mi>b</mi><mo>=</mo><msqrt><mn>2</mn></msqrt></mrow><annotation encoding="application/x-tex">a=\sqrt2^{\sqrt2},b=\sqrt2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.4935515em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.2991115em;"><span style="top:-3.3601199999999998em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.912845em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;">2</span></span><span style="top:-2.872845em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.12715500000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span></span></span></span>ï¼Œæœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup><mo>=</mo><msup><msqrt><mn>2</mn></msqrt><mn>2</mn></msup><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">a^b = \sqrt2^2=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.244008em;vertical-align:-0.13278em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.111228em;"><span style="top:-3.36012em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> ä¸ºæœ‰ç†æ•°ã€‚</p>
<p>å‡è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><msqrt><mn>2</mn></msqrt><msqrt><mn>2</mn></msqrt></msup></mrow><annotation encoding="application/x-tex">\sqrt2^{\sqrt2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4318914999999999em;vertical-align:-0.13278em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.2991115em;"><span style="top:-3.3601199999999998em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.912845em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;">2</span></span><span style="top:-2.872845em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.12715500000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> ä¸ºæœ‰ç†æ•°ï¼Œåˆ™ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><msqrt><mn>2</mn></msqrt><mo separator="true">,</mo><mi>b</mi><mo>=</mo><msqrt><mn>2</mn></msqrt></mrow><annotation encoding="application/x-tex">a=\sqrt2,b=\sqrt2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.10166em;vertical-align:-0.19444em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span></span></span></span>ã€‚</p>
<p>è¯æ¯•ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯ä¸€ä¸ªåº”ç”¨æ’ä¸­å¾‹çš„å…¸å‹ä¾‹å­ã€‚è¿™é‡Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><msqrt><mn>2</mn></msqrt><msqrt><mn>2</mn></msqrt></msup></mrow><annotation encoding="application/x-tex">\sqrt2^{\sqrt2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4318914999999999em;vertical-align:-0.13278em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.2991115em;"><span style="top:-3.3601199999999998em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.912845em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;">2</span></span><span style="top:-2.872845em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.12715500000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> åˆ°åº•æ˜¯ä¸æ˜¯æ— ç†æ•°ã€‚</p>
<blockquote>
<p>constructive proofï¼š</p>
<p>å– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><msqrt><mn>2</mn></msqrt><mo separator="true">,</mo><mi>b</mi><mo>=</mo><msub><mo><mi>log</mi><mo>â¡</mo></mo><mn>2</mn></msub><mn>9</mn></mrow><annotation encoding="application/x-tex">a=\sqrt2,b=\log_29</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.10166em;vertical-align:-0.19444em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.93858em;vertical-align:-0.24414em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">9</span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup><mo>=</mo><msup><msqrt><mn>2</mn></msqrt><mrow><mn>2</mn><msub><mo><mi>log</mi><mo>â¡</mo></mo><mn>2</mn></msub><mn>3</mn></mrow></msup><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">a^b=  \sqrt2^{2\log_23} = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2790080000000001em;vertical-align:-0.13278em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.146228em;"><span style="top:-3.36012em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.19444571428571428em;"><span style="top:-2.2341314285714287em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.26586857142857145em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>ï¼Œè¯æ¯•ã€‚</p>
</blockquote>
<p>ä¸è¿‡å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸æ˜¯æ‰€æœ‰å®šç†éƒ½å¯ä»¥ç”¨æ„é€ é€»è¾‘å®Œæˆè¯æ˜çš„ï¼Œæ¯”å¦‚è¯´è‘—åçš„åœæœºé—®é¢˜ï¼Œä»¥åŠè¯æ˜â€œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mo>+</mo><mi>e</mi></mrow><annotation encoding="application/x-tex">\pi + e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">\pi e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mord mathnormal">e</span></span></span></span> è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯æ— ç†æ•°â€ã€‚</p>
<p>æ²¡çœ‹æ‡‚ä¹¦ä¸Šå†™çš„ç”¨ CH åŒæ„å¤„ç† nonconstructive reasoning çš„æ–¹æ³•ã€‚å’•ç€å§åæ­£ä¸é‡è¦ã€‚</p>
<h2 id="è‡ªç„¶æ•°ä¸Šçš„è¯æ˜"><a class="markdownIt-Anchor" href="#è‡ªç„¶æ•°ä¸Šçš„è¯æ˜"></a> è‡ªç„¶æ•°ä¸Šçš„è¯æ˜</h2>
<h3 id="çš®äºšè¯ºæ•´æ•°åŠç®€å•è¿ç®—"><a class="markdownIt-Anchor" href="#çš®äºšè¯ºæ•´æ•°åŠç®€å•è¿ç®—"></a> çš®äºšè¯ºæ•´æ•°åŠç®€å•è¿ç®—</h3>
<p>çš®äºšè¯ºæ•´æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">data â„• : Set where<br>  zero : â„•<br>  suc : â„• â†’ â„•<br></code></pre></td></tr></table></figure>
<p>æ¯”å¦‚è¯´ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> çš„è¡¨ç¤ºå°±æ˜¯ <code>suc (suc (suc zero))</code>ï¼Œæ³¨æ„æ‹¬å·åœ¨è¿™é‡Œæ˜¯å¿…é¡»çš„ï¼Œé‰´äº function application çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼ˆç±»æ¯” Haskellï¼‰ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯åŠ æ³•çš„å®šä¹‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">_+_ : â„• â†’ â„• â†’ â„•<br>zero  + n = n<br>suc m + n = suc (m + n)<br></code></pre></td></tr></table></figure>
<p>è¿™ä»ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„ pattern matching çš„ä¾‹å­ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬å®šç†ä»¥åŠå…¶è¯æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs agda">0+ : âˆ€ (x : â„•) â†’ 0 + x â‰¡ x<br>0+ x = refl<br><br>+0 : âˆ€ (x : â„•) â†’ x + 0 â‰¡ x<br>+0 zero = refl<br>+0 (suc x) rewrite +0 x = refl<br></code></pre></td></tr></table></figure>
<p><code>0+</code> æ˜¯æ˜¾ç„¶çš„ï¼Œå› ä¸º<strong>æ ¹æ®åŠ æ³•çš„å®šä¹‰</strong>ï¼Œ<code>0 + x</code> æ˜¯å¯ä»¥ç›´æ¥å±•å¼€ä¸º <code>x</code> çš„ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ª <code>refl</code> å³å®Œæˆè¯æ˜ã€‚ä½†æ˜¯ <code>+0</code> åˆ™æ˜¯ä¸æ˜¾ç„¶çš„â€”â€”ä½ æ²¡æœ‰åŠæ³•ç›´æ¥<strong>æ ¹æ®åŠ æ³•çš„å®šä¹‰</strong>å°†å…¶ç›´æ¥å±•å¼€ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨ <code>refl</code> è¯æ˜ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œä½¿ç”¨ hole å¯ä»¥çœ‹å‡ºæˆ‘ä»¬è¯æ˜çš„ç›®æ ‡æ˜¯ <code>suc (x + 0) â‰¡ suc x</code>ï¼Œå€˜è‹¥æˆ‘ä»¬èƒ½è¯´æ˜ <code>x + 0</code> å’Œ <code>x</code> ç›¸ç­‰ï¼Œæ˜¯ä¸æ˜¯å°± OK äº†å‘¢ï¼Ÿæ‰€ä»¥ä½¿ç”¨ <code>rewrite</code> æ¥â€œå½’çº³â€ï¼Œç›®æ ‡å°±å˜ä¸ºäº†è¯æ˜ <code>suc x â‰¡ suc x</code>ï¼Œè‡ªç„¶ç”¨ <code>refl</code> å³å¯ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è‡ªç„¶æ•°ç›¸å…³è¯æ˜é‡Œé¢ï¼ŒæŒ‰ç…§ <code>0</code> å’Œ <code>suc n</code> æ¥è¿›è¡Œåˆ†ç±»è®¨è®ºå¾€å¾€æ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚è¿™ç§ç”¨é€’å½’æ¥åˆ»ç”»å½’çº³çš„æƒ³æ³•ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p>
<p>æ¥ä¸‹æ¥è¯æ˜ç»“åˆå¾‹ã€‚è¿™æ˜¯ç”¨ hole æ¥å¼€å‘è¯æ˜çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚<code>C-c C-l</code>  å¯ä»¥ç”Ÿæˆ holesï¼Œç„¶åæŠŠå…‰æ ‡æ”¾åœ¨ hole é‡Œé¢æŒ‰ä¸‹ <code>C-c C-,</code> å¯ä»¥è°ƒå‡ºå½“å‰è¦è¯æ˜çš„ goal ä»¥åŠç›¸åº”çš„ contextã€‚å½“å®Œæˆäº†è¯æ˜ä¹‹åï¼ŒæŒ‰ä¸‹ <code>C-c C-space</code> å³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">+assoc : âˆ€ (x y z : â„•) â†’ x + (y + z) â‰¡ (x + y) + z<br>+assoc zero y z = refl<br>+assoc (suc x) y z rewrite +assoc x y z = refl<br></code></pre></td></tr></table></figure>
<p>å…·ä½“è¿‡ç¨‹å°±ç•¥è¿‡äº†ã€‚</p>
<p>å†æ¥ä¸‹æ¥è¯æ˜äº¤æ¢å¾‹ã€‚ä¸€æ ·æ˜¯ç±»ä¼¼çš„æ€è·¯ï¼Œå…ˆè€ƒè™‘åˆ†ç±»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">+comm : âˆ€ (x y : â„•) â†’ x + y â‰¡ y + x<br>+comm zero y = ?<br>+comm (suc x) y = ?<br></code></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€ä¸ª hole é‡Œé¢ <code>C-c C-,</code>ï¼ŒçŸ¥é“ç›®æ ‡ä¸ºè¯æ˜ <code>y â‰¡ y + zero</code>ï¼Œä¸éš¾å‘ç°ä½¿ç”¨ <code>+0 y</code> rewrite ä¸€ä¸‹å³å¯ã€‚åœ¨ç¬¬äºŒä¸ª hole é‡Œé¢ï¼Œç›®æ ‡ä¸º <code>suc (x + y) â‰¡ y + suc x</code>ï¼Œç”¨ <code>+comm x y</code> rewrite ä¹‹ï¼Œå˜æˆ <code>suc (y + x) â‰¡ y + suc x</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">+comm : âˆ€ (x y : â„•) â†’ x + y â‰¡ y + x<br>+comm zero y rewrite +0 y = refl<br>+comm (suc x) y rewrite +comm x y = &#123;!   0!&#125;<br></code></pre></td></tr></table></figure>
<p>ç°åœ¨æ€ä¹ˆåŠå‘¢ï¼Œå‘ç°æ­¤æ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¼•ç†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">+suc : âˆ€ (x y : â„•) â†’ x + (suc y) â‰¡ suc(x + y)<br>+suc zero y = refl<br>+suc (suc x) y rewrite +suc x y = refl<br></code></pre></td></tr></table></figure>
<p>å† rewrite ä¹‹å³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">+comm : âˆ€ (x y : â„•) â†’ x + y â‰¡ y + x<br>+comm zero y rewrite +0 y = refl<br>+comm (suc x) y rewrite +comm x y | +suc y x = refl<br></code></pre></td></tr></table></figure>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>+suc y x</code> å’Œ <code>+comm x y</code> çš„ä½ç½®æ˜¯å¯ä»¥æ›¿æ¢çš„ï¼Œrewrite <strong>åªä¼š rewrite ä¸€æ¬¡</strong>ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯ä¹˜æ³•çš„å®šä¹‰ä»¥åŠä¸€ç³»åˆ—ç›¸å…³è¯æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs agda">_*_ : â„• â†’ â„• â†’ â„•<br>zero  * n = zero<br>suc m * n = n + (m * n)<br><br>*distribr : âˆ€ (x y z : â„•) â†’ (x + y) * z â‰¡ x * z + y * z<br>*distribr zero y z = refl<br>*distribr (suc x) y z rewrite *distribr x y z = +assoc z (x * z) (y * z) <br><br>*0 : (x : â„•) â†’ x * zero â‰¡ zero<br>*0 zero = refl<br>*0 (suc n) rewrite *0 n = refl<br><br>*suc : (x y : â„•) â†’ x * suc y â‰¡ x + x * y<br>*suc zero y = refl<br>*suc (suc n) m rewrite *suc n m | +assoc m n (n * m) | +assoc n m (n * m) | +comm n m = refl<br><br>*-comm : (x y : â„•) â†’ x * y â‰¡ y * x<br>*-comm 0 m rewrite *0 m = refl<br>*-comm (suc n) m rewrite *suc m n | *-comm n m = refl<br><br>*-assoc : (x y z : â„•) â†’ (x * y) * z â‰¡ x * (y * z)<br>*-assoc 0 y z = refl<br>*-assoc (suc x) y z rewrite *distribr y (x * y) z | *-assoc x y z = refl<br></code></pre></td></tr></table></figure>
<p>æœ€åå››ä¸ªè¯æ˜æ˜¯æˆ‘è‡ªå·±å†™çš„ï¼Œå†™çš„æ–¹å¼æ˜¯ä¸å”¯ä¸€çš„ã€‚</p>
<h3 id="ä¸ç­‰å…³ç³»"><a class="markdownIt-Anchor" href="#ä¸ç­‰å…³ç³»"></a> ä¸ç­‰å…³ç³»</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs agda">_&lt;_ : â„• â†’ â„• â†’ ğ”¹<br>0 &lt; 0 = ff<br>0 &lt; (suc y) = tt<br>(suc x) &lt; (suc y) = x &lt; y<br>(suc x) &lt; 0 = ff<br><br>_=â„•_ : â„• â†’ â„• â†’ ğ”¹<br>0 =â„• 0 = tt<br>suc x =â„• suc y = x =â„• y<br>_ =â„• _ = ff<br><br>_â‰¤_ : â„• â†’ â„• â†’ ğ”¹<br>x â‰¤ y = (x &lt; y) || x =â„• y<br><br>_&gt;_ : â„• â†’ â„• â†’ ğ”¹<br>a &gt; b = b &lt; a<br><br>_â‰¥_ : â„• â†’ â„• â†’ ğ”¹<br>a â‰¥ b = b â‰¤ a<br></code></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯ä¸€äº›å®šç†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs agda">&lt;-0 : âˆ€ (x : â„•) â†’ x &lt; 0 â‰¡ ff<br>&lt;-0 0 = refl<br>&lt;-0 (suc y) = refl<br><br>&lt;-trans : âˆ€ &#123;x y z : â„•&#125; â†’ x &lt; y â‰¡ tt â†’ y &lt; z â‰¡ tt â†’ x &lt; z â‰¡ tt<br>&lt;-trans &#123;x&#125; &#123;0&#125; p1 p2 rewrite &lt;-0 x = ğ”¹-contra p1<br>&lt;-trans &#123;0&#125; &#123;suc y&#125; &#123;0&#125; p1 () <br>&lt;-trans &#123;0&#125; &#123;suc y&#125; &#123;suc z&#125; p1 p2 = refl<br>&lt;-trans &#123;suc x&#125; &#123;suc y&#125; &#123;0&#125; p1 () <br>&lt;-trans &#123;suc x&#125; &#123;suc y&#125; &#123;suc z&#125; p1 p2 = &lt;-trans &#123;x&#125; &#123;y&#125; &#123;z&#125; p1 p2<br></code></pre></td></tr></table></figure>
<p>æ— éæ˜¯è€ƒè™‘ç–¯ç‹‚åˆ†ç±»è®¨è®ºã€‚</p>
<p>æœ€åæ˜¯ä¸€äº›ç›¸äº’é€’å½’çš„è¯æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs agda">even~odd : âˆ€ (x : â„•) â†’ is-even x â‰¡ ~ is-odd x<br>odd~even : âˆ€ (x : â„•) â†’ is-odd x â‰¡ ~ is-even x<br>even~odd zero = refl<br>even~odd (suc x) = odd~even x<br>odd~even zero = refl<br>odd~even (suc x) = even~odd x<br></code></pre></td></tr></table></figure>
<p>æƒ³æ³•å¾ˆç±»ä¼¼äºå­¦ä¹  Haskell æ—¶å€™çš„ï¼Œè¿™é‡Œå°±ç•¥è¿‡å§ã€‚</p>
<h2 id="list"><a class="markdownIt-Anchor" href="#list"></a> List</h2>
<h3 id="åŸºæœ¬å®šä¹‰"><a class="markdownIt-Anchor" href="#åŸºæœ¬å®šä¹‰"></a> åŸºæœ¬å®šä¹‰</h3>
<p>åˆ—è¡¨çš„å®šä¹‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">data ğ•ƒ &#123;â„“&#125; (A : Set â„“) : Set â„“ where<br>  [] : ğ•ƒ A<br>  _::_ : (x : A) (xs : ğ•ƒ A) â†’ ğ•ƒ A<br></code></pre></td></tr></table></figure>
<p>just a typical type constructorã€‚<code>::</code> è¯»ä½œ consï¼Œæ¥ä¸‹æ¥ç±»ä¼¼ Haskell åœ°ï¼Œä¸€äº›ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs agda">is-empty : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ ğ•ƒ A â†’ ğ”¹<br>is-empty [] = tt<br>is-empty (_ :: _) = ff<br><br>tail : âˆ€ &#123;â„“&#125; &#123;A : Set â„“&#125; â†’ ğ•ƒ A â†’ ğ•ƒ A<br>tail [] = []<br>tail (x :: xs) = xs<br><br>head : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ (l : ğ•ƒ A) â†’ .(is-empty l â‰¡ ff) â†’ A<br>head [] ()<br>head (x :: xs) _ = x<br><br>head2 : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ (l : ğ•ƒ A) â†’ maybe A<br>head2 [] = nothing<br>head2 (a :: _) = just a<br></code></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ° <code>head2</code> ç”¨åˆ°äº† maybe monadã€‚è¿™é‡Œè·Ÿ Haskell çš„æ€æƒ³ä¹Ÿæ˜¯å¾ˆåƒçš„ï¼š<strong>æŒ‰ç…§åˆ—è¡¨æ˜¯å¦ä¸ºç©ºåˆ†ç±» pattern matching</strong>ã€‚</p>
<p>ç„¶åæ˜¯å–œé—»ä¹è§çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs agda">_++_ : âˆ€ &#123;â„“&#125; &#123;A : Set â„“&#125; â†’ ğ•ƒ A â†’ ğ•ƒ A â†’ ğ•ƒ A<br>[]        ++ ys = ys<br>(x :: xs) ++ ys = x :: (xs ++ ys)<br><br>concat : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ ğ•ƒ (ğ•ƒ A) â†’ ğ•ƒ A<br>concat [] = []<br>concat (l :: ls) = l ++ concat ls<br><br>repeat : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ â„• â†’ A â†’ ğ•ƒ A<br>repeat 0 a = []<br>repeat (suc n) a = a :: (repeat n a)<br><br>map : âˆ€ &#123;â„“ â„“&#x27;&#125; &#123;A : Set â„“&#125; &#123;B : Set â„“&#x27;&#125; â†’ (A â†’ B) â†’ ğ•ƒ A â†’ ğ•ƒ B<br>map f []        = []<br>map f (x :: xs) = f x :: map f xs<br><br>foldr : âˆ€&#123;â„“ â„“&#x27;&#125;&#123;A : Set â„“&#125;&#123;B : Set â„“&#x27;&#125; â†’ (A â†’ B â†’ B) â†’ B â†’ ğ•ƒ A â†’ B<br>foldr f b [] = b<br>foldr f b (a :: as) = f a (foldr f b as)<br><br>length : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ ğ•ƒ A â†’ â„•<br>length [] = 0<br>length (x :: xs) = suc (length xs)<br><br>filter : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ (A â†’ ğ”¹) â†’ ğ•ƒ A â†’ ğ•ƒ A<br>filter p [] = []<br>filter p (x :: xs) = let r = filter p xs in <br>                     if p x then x :: r else r<br></code></pre></td></tr></table></figure>
<p>å®Œå…¨è·Ÿ Haskell é‡Œé¢çš„å°±å·®ä¸å¤šæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œç•¥ã€‚</p>
<p>å’Œ list æœ‰å…³çš„è¯æ˜ä¹Ÿæ˜¯åˆ©ç”¨ pattern matchingã€‚</p>
<h3 id="length-of-filtered-lists-and-the-with-construct"><a class="markdownIt-Anchor" href="#length-of-filtered-lists-and-the-with-construct"></a> Length of Filtered Lists, and the with Construct</h3>
<p>æ­¤å¤„çœ‹ä¸€ä¸ªå…¸å‹ä¾‹å­ï¼Œä»¥æ­¤å¼•å…¥ <code>with</code> è®°å·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs agda">length-filter : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125;(p : A â†’ ğ”¹)(l : ğ•ƒ A) â†’ <br>                length (filter p l) â‰¤ length l â‰¡ tt<br>length-filter p [] = refl<br>length-filter p (x :: l) with p x<br>length-filter p (x :: l) | tt = length-filter p l<br>length-filter p (x :: l) | ff = <br>  â‰¤-trans&#123;length (filter p l)&#125; (length-filter p l) (â‰¤-suc (length l))<br></code></pre></td></tr></table></figure>
<p>å…·ä½“çœ‹ä¸€ä¸‹æ€ä¹ˆè¯´å§ã€‚å¯¹äº <code>[]</code> çš„æƒ…å†µï¼Œ<code>refl</code> æ˜¯è‡ªç„¶çš„ã€‚å¦‚æœæˆ‘ä»¬å¼•å…¥ holeï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">length-filter p [] = refl<br>length-filter p (x :: l) = &#123;!   0!&#125;<br></code></pre></td></tr></table></figure>
<p>ä»–ä¼šè¿”å›ç›®æ ‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">length (if p x then x :: filter p l else filter p l) â‰¤<br>      suc (length l)<br>      â‰¡ tt<br></code></pre></td></tr></table></figure>
<p>è¿™ä¸ªç›®æ ‡æ˜¾ç„¶æ˜¯ä¸å¤ªä¼˜ç¾çš„ã€‚å‘ç°å¦‚æœ <code>p x</code> ä¸º <code>tt</code>ï¼Œé‚£ä¹ˆéœ€è¦è¯æ˜çš„å°±å˜æˆ <code>length (filter p l) â‰¤ length l â‰¡ tt</code>ï¼Œå‘ç°è¿™ä¸å°±æ˜¯ <code>length-filter p l</code> å—ï¼Œæ‰€ä»¥ç”¨ç±»ä¼¼å½’çº³çš„æƒ³æ³•å°±å¯ä»¥äº†ã€‚</p>
<p>ç°åœ¨éš¾æçš„æ˜¯å¯¹äº <code>p x</code> ä¸º <code>ff</code> çš„çŠ¶æ€ï¼šè¦è¯æ˜ <code>length (filter p l) â‰¤ suc (length l) â‰¡ tt</code>ã€‚ä¸è¿‡å¦‚æœæˆ‘ä»¬çŸ¥é“ <code>length (filter p l) â‰¤ length l â‰¡ tt</code> ä»¥åŠ <code>length l â‰¤ suc (length l)</code>ï¼Œåˆ™åˆ©ç”¨å°äºç­‰äºå·çš„ä¼ é€’æ€§å³å¾—è¯ã€‚</p>
<p><code>with</code> è®°å·å…¶å®ç±»ä¼¼äº Haskell ä¸­çš„ case ofï¼Œè¯­æ³•è§ä¸Šï¼Œåº”è¯¥æ˜¯è¾ƒä¸ºè‡ªç„¶çš„ã€‚</p>
<h3 id="filter-çš„å¹‚ç­‰æ€§ä»¥åŠ-keep-è®°å·"><a class="markdownIt-Anchor" href="#filter-çš„å¹‚ç­‰æ€§ä»¥åŠ-keep-è®°å·"></a> Filter çš„å¹‚ç­‰æ€§ä»¥åŠ keep è®°å·</h3>
<p>è€ƒè™‘è¯æ˜å¦‚ä¸‹çš„ä¸œè¥¿ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">filter-idem : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125;(p : A â†’ ğ”¹)(l : ğ•ƒ A) â†’<br>              (filter p (filter p l)) â‰¡ (filter p l)<br></code></pre></td></tr></table></figure>
<p>å³ï¼Œfilter è¿‡åå† filter ä¸€éå¾—åˆ°çš„ç»“æœè·Ÿåª filter ä¸€éæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>æ˜¾ç„¶ï¼Œä» <code>[]</code> å‡ºå‘æ˜¯è¾ƒä¸ºåˆé€‚çš„ï¼Œç„¶åè€ƒè™‘ <code>x :: l</code> çš„æƒ…å†µï¼Œç›®æ ‡å˜æˆäº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs agda">filter p (if p x then x :: filter p l else filter p l) â‰¡<br>      if p x then x :: filter p l else filter p l<br></code></pre></td></tr></table></figure>
<p>å¯ä»¥è¯´æ˜¯ç›¸å½“ä¸‘é™‹ã€‚ç±»ä¼¼ä¸Šé¢çš„ï¼Œç”¨ <code>with</code> åˆ†ç±»è®¨è®ºä¸€ä¸‹ï¼Œå‘ç°å½“ <code>p x</code> ä¸º <code>tt</code> æ—¶ï¼Œç›®æ ‡å˜ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">if p x then x :: filter p (filter p l) else<br>      filter p (filter p l)<br>      â‰¡ x :: filter p l<br></code></pre></td></tr></table></figure>
<p>è¿™é‡Œ Agda å°±è‡ªåŠ¨å¸®æˆ‘ä»¬è¿›è¡Œäº†ä¸€æ¬¡å±•å¼€ï¼šç­‰å·å·¦è¾¹å˜æˆäº† <code>filter p (if tt then x :: filter p l else filter p l)</code>ï¼Œå³ <code>filter p (x :: filter p l)</code>ï¼Œå†æ ¹æ® <code>filter</code> çš„å®šä¹‰å±•å¼€ï¼š<code>if p x then x :: filter p (filter p l) else filter p (filter p l)</code>ï¼Œåˆè¹¦å‡ºæ¥äº†ä¸€ä¸ª <code>if_then_else</code>ã€‚è¿™æ˜¯å› ä¸º <strong>with åªä¼šå°†è¡¨è¾¾å¼å®ä¾‹åŒ–ä¸€æ¬¡</strong>ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™ä¸‹å¾—å¼•å…¥ä¸€ä¸ªæ–°è®°å· <code>keep</code>ï¼ˆä¹¦ä¸Šæ˜¯è¿™ä¹ˆå«çš„ï¼Œæ ‡å‡†åº“é‡Œé¢ä¼¼ä¹æ˜¯ <code>inspect</code>ï¼‰ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs agda">-- this is called the inspect idiom, in the Agda stdlib<br>keep : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125; â†’ (x : A) â†’ Î£ A (Î» y â†’ x â‰¡ y)<br>keep x = ( x , refl )<br></code></pre></td></tr></table></figure>
<p>ç›´æ¥çœ‹ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs agda">filter-idem : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125;(p : A â†’ ğ”¹)(l : ğ•ƒ A) â†’<br>              (filter p (filter p l)) â‰¡ (filter p l)<br>filter-idem p [] = refl<br>filter-idem p (x :: l) with keep (p x)<br>filter-idem p (x :: l) | tt , p&#x27; = ?<br>filter-idem p (x :: l) | ff , p&#x27; = ?<br></code></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬æ£€æŸ¥ç¬¬ä¸€ä¸ª hole çš„ contextï¼Œä¼šå‘ç° <code>p'</code> æœ‰ç±»å‹ <code>p' : p x â‰¡ tt</code>ã€‚æ³¨æ„ Agda æ˜¯ä¸ä¼šè‡ªåŠ¨å®ä¾‹åŒ– <code>p x â‰¡ tt</code> çš„ï¼Œéœ€è¦æˆ‘ä»¬å» rewriteã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦ rewrite ä¸¤ä¸ª <code>p'</code>ã€‚æ­¤æ—¶å¯¹äº <code>tt</code> çš„æƒ…å†µï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs agda">filter-idem p (x :: l) | tt , p&#x27; rewrite p&#x27; | p&#x27; = &#123;!   0!&#125;<br></code></pre></td></tr></table></figure>
<p>ç›®æ ‡ä¸º <code>x :: filter p (filter p l) â‰¡ x :: filter p l</code>ã€‚é‚£ä¹ˆæ˜¾ç„¶å½’çº³ä¸€ä¸‹å°±å¼„å®Œäº†ã€‚<code>ff</code> æ˜¯ç±»ä¼¼çš„ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs agda">filter-idem : âˆ€&#123;â„“&#125;&#123;A : Set â„“&#125;(p : A â†’ ğ”¹)(l : ğ•ƒ A) â†’<br>              (filter p (filter p l)) â‰¡ (filter p l)<br>filter-idem p [] = refl<br>filter-idem p (x :: l) with keep (p x)<br>filter-idem p (x :: l) | tt , p&#x27; rewrite p&#x27; | p&#x27; | filter-idem p l = refl<br>filter-idem p (x :: l) | ff , p&#x27; rewrite p&#x27; = filter-idem p l<br></code></pre></td></tr></table></figure>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œrewrite è®°å·æ˜¯<strong>ä»å·¦å¾€å³é‡å†™ï¼Œä¸€ä¸ªè¡¨è¾¾å¼åªé‡å†™ä¸€æ¬¡</strong>çš„ã€‚</p>
<p>æ‰€ä»¥å¦‚æœè°ƒæ¢ä¸€ä¸‹ rewrite åé¢å‡ ä¸ªä¸œè¥¿çš„é¡ºåºçš„è¯ï¼Œæ˜¯æœ‰å¯èƒ½å¤±è´¥çš„ã€‚</p>
<h2 id="internal-verification"><a class="markdownIt-Anchor" href="#internal-verification"></a> Internal Verification</h2>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%AC%94%E8%AE%B0/" class="category-chain-item">ç¬”è®°</a>
  
  
    <span>></span>
    
  <a href="/categories/%E7%AC%94%E8%AE%B0/%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/" class="category-chain-item">æœ¬ç§‘è¯¾ç¨‹</a>
  
  
    <span>></span>
    
  <a href="/categories/%E7%AC%94%E8%AE%B0/%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%A6%82%E8%AE%BA/" class="category-chain-item">è®¡ç®—æ¦‚è®º</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E7%AC%94%E8%AE%B0/" class="print-no-link">#ç¬”è®°</a>
      
        <a href="/tags/Agda/" class="print-no-link">#Agda</a>
      
        <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" class="print-no-link">#å‡½æ•°å¼ç¼–ç¨‹</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>è®¡ç®—æ¦‚è®º A è¯¾ç¨‹ç¬”è®°ï¼šAgda</div>
      <div>https://blog.imyangty.com/note-intro2computing/agda/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>YangTY</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>November 15, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/note-simple-math-tricks/" title="æ•°å­¦åŸºç¡€è¾…å·®">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">æ•°å­¦åŸºç¡€è¾…å·®</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/note-linear-algebra-a1/" title="çº¿æ€§ä»£æ•° A (I) è¯¾ç¨‹ç¬”è®°">
                        <span class="hidden-mobile">çº¿æ€§ä»£æ•° A (I) è¯¾ç¨‹ç¬”è®°</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"Cgfyufsygsm/cgfyufsygsm.github.io","repo-id":"MDEwOlJlcG9zaXRvcnkzOTIyMDA0MzQ=","category":"Announcements","category-id":"DIC_kwDOF2CA8s4CZEyl","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <br> <p>CopyrightÂ© 2020-2026 <a href="/">YangTY's Blog</a></p> <br> <a target="_blank" rel="noopener" href="https://clustrmaps.com/site/1c1rp"  title="Visit tracker"><img src="//www.clustrmaps.com/map_v2.png?d=K0MO4d8JdrSjeQTYqe1d2JXGwDGExBIbgHOhU_V8eGE&cl=ffffff" srcset="/img/loading.gif" lazyload /></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        Views: 
        <span id="busuanzi_value_site_pv"></span>
        
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        Visitors: 
        <span id="busuanzi_value_site_uv"></span>
        
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
